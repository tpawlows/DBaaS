# external-dns
Thanks to **external-dns**, cluster will automatically create and add **DNS records** into the **hosted zone**. Those records will be pointing to the **Load Balancer**, which will forward http and https (ports 80 and 443) requests into the **ingress controller** and then forward them into the services as specified in **ingress**.

## Prerequisites

-   Kubernetes 1.12+
-   Helm 3.1.0

## Usage
- Create an IAM Policy called **AllowExternalDNSUpdates**, which allows entities update DNS records in hosted zones:
```bash
$ cat AllowExternalDNSUpdates.json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "route53:ChangeResourceRecordSets"
      ],
      "Resource": [
        "arn:aws:route53:::hostedzone/*"
      ]
    },
    {
      "Effect": "Allow",
      "Action": [
        "route53:ListHostedZones",
        "route53:ListResourceRecordSets"
      ],
      "Resource": [
        "*"
      ]
    }
  ]
}
```
```bash
aws iam create-policy --policy-name AllowExternalDNSUpdates--policy-document file://AllowExternalDNSUpdates.json
```
- Get policy ARN (and store it in a variable **AllowExternalDNSUpdates**)
```bash
export AllowExternalDNSUpdates=$(aws iam list-policies | grep  AllowExternalDNSUpdates | grep Arn | cut -d "\"" -f4)
```
- Attach the policy to nodes.k8s.retipuj.com security group
	- kOps created SG (security group) for both master (masters.k8s.retipuj.com) and worker nodes (nodes.k8s.retipuj.com), we need to add **AllowExternalDNSUpdates** to worker nodes, so external-dns can then update DNS records in a hosted zone.
```bash
aws iam attach-role-policy --role-name nodes.k8s.retipuj.com --policy-arn $AllowExternalDNSUpdates 
```
- Get Chart
```bash
helm repo add bitnami https://charts.bitnami.com/bitnami
```
- Store the ID of your hosted zone in a variable, which will serve as the value for **my-hostedzone-identifier**.
```bash
# in my case its retipuj.com
export hostedZoneID=$(aws route53 list-hosted-zones-by-name --output json --dns-name "retipuj.com" | jq -r '.HostedZones[0].Id')
```
- Install Chart with custom values
```bash
helm install -f external-dns-values.yaml --set txtOwnerId=$hostedZoneID external-dns bitnami/external-dns
```
## Important note

External-dns will only work if:
- Ingress Controller is deployed 
- Ingress is deployed configured properly
- Your services are deployed (don't worry, you can deploy them later, if you haven't already)

To validate if everything is working, wait 3 min and check if:
- external-dns service and deployment is up and running
- DNS records for your services defined in Ingress are added to you Hosted Zone
- You can access you services yousing your browser

** REMEMBER, THAT IF YOU DELETE YOU CLUSTER WITH KOPS, DNS RECORDS WILL STILL REMAIN IN HOSTED ZONE! **

## Parameters

The following table lists the configurable parameters of the external-dns chart and their default values.

| Parameter                              | Description                                                                                                                                                                                                     | Default                                                 |
|----------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
| `global.imageRegistry`                 | Global Docker image registry                                                                                                                                                                                    | `nil`                                                   |
| `global.imagePullSecrets`              | Global Docker registry secret names as an array                                                                                                                                                                 | `[]` (does not add image pull secrets to deployed pods) |
| `image.registry`                       | ExternalDNS image registry                                                                                                                                                                                      | `docker.io`                                             |
| `image.repository`                     | ExternalDNS Image name                                                                                                                                                                                          | `bitnami/external-dns`                                  |
| `image.tag`                            | ExternalDNS Image tag                                                                                                                                                                                           | `{TAG_NAME}`                                            |
| `image.pullPolicy`                     | ExternalDNS image pull policy                                                                                                                                                                                   | `IfNotPresent`                                          |
| `image.pullSecrets`                    | Specify docker-registry secret names as an array                                                                                                                                                                | `[]` (does not add image pull secrets to deployed pods) |
| `nameOverride`                         | String to partially override external-dns.fullname template with a string (will prepend the release name)                                                                                                       | `nil`                                                   |
| `fullnameOverride`                     | String to fully override external-dns.fullname template with a string                                                                                                                                           | `nil`                                                   |
| `clusterDomain`                        | Default Kubernetes cluster domain                                                                                                                                                                               | `cluster.local` |
| `sources`                              | K8s resources type to be observed for new DNS entries by ExternalDNS                                                                                                                                            | `[service, ingress]`                                    |
| `provider`                             | DNS provider where the DNS records will be created (mandatory) (options: aws, azure, google, ...)                                                                                                               | `aws`                                                   |
| `namespace`                            | Limit sources of endpoints to a specific namespace (default: all namespaces)                                                                                                                                    | `""`                                                    |
| `fqdnTemplates`                        | Templated strings that are used to generate DNS names from sources that don't define a hostname themselves                                                                                                      | `[]`                                                    |
| `combineFQDNAnnotation`                | Combine FQDN template and annotations instead of overwriting                                                                                                                                                    | `false`                                                 |
| `hostAliases`                          | Add deployment host aliases                                                                                                                                                                                     | `[]`                                                    |
| `ignoreHostnameAnnotation`             | Ignore hostname annotation when generating DNS names, valid only when fqdn-template is set                                                                                                                      | `false`                                                 |
| `publishInternalServices`              | Whether to publish DNS records for ClusterIP services or not                                                                                                                                                    | `false`                                                 |
| `publishHostIP`                        | Allow external-dns to publish host-ip for headless services                                                                                                                                                     | `false`                                                 |
| `serviceTypeFilter`                    | The service types to take care about (default: all, options: ClusterIP, NodePort, LoadBalancer, ExternalName)                                                                                                   | `[]`                                                    |
| `alibabacloud.accessKeyId`             | When using the Alibaba Cloud provider, set `accessKeyId` in the Alibaba Cloud configuration file (optional)                                                                                                     | `""`                                                    |
| `alibabacloud.accessKeySecret`         | When using the Alibaba Cloud provider, set `accessKeySecret` in the Alibaba Cloud configuration file (optional)                                                                                                 | `""`                                                    |
| `alibabacloud.regionId`                | When using the Alibaba Cloud provider, set `regionId` in the Alibaba Cloud configuration file (optional)                                                                                                        | `""`                                                    |
| `alibabacloud.zoneType`                | When using the Alibaba Cloud provider, filter for zones of this type (optional, options: public, private)                                                                                                       | `""`                                                    |
| `aws.credentials.accessKey`            | When using the AWS provider, set `aws_access_key_id` in the AWS credentials (optional)                                                                                                                          | `""`                                                    |
| `aws.credentials.secretKey`            | When using the AWS provider, set `aws_secret_access_key` in the AWS credentials (optional)                                                                                                                      | `""`                                                    |
| `aws.credentials.mountPath`            | When using the AWS provider, determine `mountPath` for `credentials` secret                                                                                                                                     | `"/.aws"`                                               |
| `aws.region`                           | When using the AWS provider, `AWS_DEFAULT_REGION` to set in the environment (optional)                                                                                                                          | `us-east-1`                                             |
| `aws.apiRetries`                       | Maximum number of retries for AWS API calls before giving up                                                                                                                                                    | `3`                                                     |
| `aws.zoneType`                         | When using the AWS provider, filter for zones of this type (optional, options: public, private)                                                                                                                 | `""`                                                    |
| `aws.assumeRoleArn`                    | When using the AWS provider, assume role by specifying --aws-assume-role to the external-dns daemon                                                                                                             | `""`                                                    |
| `aws.batchChangeSize`                  | When using the AWS provider, set the maximum number of changes that will be applied in each batch                                                                                                               | `1000`                                                  |
| `aws.zoneTags`                         | When using the AWS provider, filter for zones with these tags                                                                                                                                                   | `[]`                                                    |
| `aws.preferCNAME`                      | When using the AWS provider, replaces Alias records with CNAME (options: true, false)                                                                                                                           | `[]`                                                    |
| `aws.evaluateTargetHealth`             | When using the AWS provider, sets the evaluate target health flag (options: true, false)                                                                                                                        | `[true, false]`                                         |
| `azure.secretName`                     | When using the Azure provider, set the secret containing the `azure.json` file                                                                                                                                  | `""`                                                    |
| `azure.cloud`                          | When using the Azure provider, set the Azure Cloud                                                                                                                                                              | `""`                                                    |
| `azure.resourceGroup`                  | When using the Azure provider, set the Azure Resource Group                                                                                                                                                     | `""`                                                    |
| `azure.tenantId`                       | When using the Azure provider, set the Azure Tenant ID                                                                                                                                                          | `""`                                                    |
| `azure.subscriptionId`                 | When using the Azure provider, set the Azure Subscription ID                                                                                                                                                    | `""`                                                    |
| `azure.aadClientId`                    | When using the Azure provider, set the Azure AAD Client ID                                                                                                                                                      | `""`                                                    |
| `azure.aadClientSecret`                | When using the Azure provider, set the Azure AAD Client Secret                                                                                                                                                  | `""`                                                    |
| `azure.useManagedIdentityExtension`    | When using the Azure provider, set if you use Azure MSI                                                                                                                                                         | `""`                                                    |
| `azure.userAssignedIdentityID`         | When using the Azure provider with Azure MSI, set Client ID of Azure user-assigned managed identity (optional, otherwise system-assigned managed identity is used)                                              | `""`                                                    |
| `cloudflare.apiToken`                  | When using the Cloudflare provider, `CF_API_TOKEN` to set (optional)                                                                                                                                            | `""`                                                    |
| `cloudflare.apiKey`                    | When using the Cloudflare provider, `CF_API_KEY` to set (optional)                                                                                                                                              | `""`                                                    |
| `cloudflare.email`                     | When using the Cloudflare provider, `CF_API_EMAIL` to set (optional). Needed when using CF_API_KEY                                                                                                              | `""`                                                    |
| `cloudflare.proxied`                   | When using the Cloudflare provider, enable the proxy feature (DDOS protection, CDN...) (optional)                                                                                                               | `true`                                                  |
| `cloudflare.secretName`                | When using the Cloudflare provider, it's the name of the secret containing cloudflare_api_token or cloudflare_api_key.                                                                                          | `""`                                                    |
| `coredns.etcdEndpoints`                | When using the CoreDNS provider, set etcd backend endpoints (comma-separated list)                                                                                                                              | `"http://etcd-extdns:2379"`                             |
| `coredns.etcdTLS.enabled`              | When using the CoreDNS provider, enable secure communication with etcd                                                                                                                                          | `false`                                                 |
| `coredns.etcdTLS.autoGenerated`        | Generate automatically self-signed TLS certificates                                                                                                                                                             | `false`                                                 |
| `coredns.etcdTLS.secretName`           | When using the CoreDNS provider, specify a name of existing Secret with etcd certs and keys                                                                                                                     | `"etcd-client-certs"`                                   |
| `coredns.etcdTLS.mountPath`            | When using the CoreDNS provider, set destination dir to mount data from `coredns.etcdTLS.secretName` to                                                                                                         | `"/etc/coredns/tls/etcd"`                               |
| `coredns.etcdTLS.caFilename`           | When using the CoreDNS provider, specify CA PEM file name from the `coredns.etcdTLS.secretName`                                                                                                                 | `"ca.crt"`                                              |
| `coredns.etcdTLS.certFilename`         | When using the CoreDNS provider, specify cert PEM file name from the `coredns.etcdTLS.secretName`                                                                                                               | `"cert.pem"`                                            |
| `coredns.etcdTLS.keyFilename`          | When using the CoreDNS provider, specify private key PEM file name from the `coredns.etcdTLS.secretName`                                                                                                        | `"key.pem"`                                             |
| `designate.authUrl`                    | When using the Designate provider, specify the OpenStack authentication Url. (optional)                                                                                                                         | `none`                                                  |
| `designate.customCA.enabled`           | When using the Designate provider, enable a custom CA (optional)                                                                                                                                                | false                                                   |
| `designate.customCA.content`           | When using the Designate provider, set the content of the custom CA                                                                                                                                             | ""                                                      |
| `designate.customCA.mountPath`         | When using the Designate provider, set the mountPath in which to mount the custom CA configuration                                                                                                              | "/config/designate"                                     |
| `designate.customCA.filename`          | When using the Designate provider, set the custom CA configuration filename                                                                                                                                     | "designate-ca.pem"                                      |
| `designate.customCAHostPath`           | When using the Designate provider, use a CA file already on the host to validate Openstack APIs.  This conflicts with `designate.customCA.enabled`                                                              | `none`                                                  |
| `designate.password`                   | When using the Designate provider, specify the OpenStack authentication password. (optional)                                                                                                                    | `none`                                                  |
| `designate.projectName`                | When using the Designate provider, specify the OpenStack project name. (optional)                                                                                                                               | `none`                                                  |
| `designate.regionName`                 | When using the Designate provider, specify the OpenStack region name. (optional)                                                                                                                                | `none`                                                  |
| `designate.userDomainName`             | When using the Designate provider, specify the OpenStack user domain name. (optional)                                                                                                                           | `none`                                                  |
| `designate.username`                   | When using the Designate provider, specify the OpenStack authentication username. (optional)                                                                                                                    | `none`                                                  |
| `digitalocean.apiToken`                | When using the DigitalOcean provider, `DO_TOKEN` to set (optional)                                                                                                                                              | `""`                                                    |
| `google.project`                       | When using the Google provider, specify the Google project (required when provider=google)                                                                                                                      | `""`                                                    |
| `google.serviceAccountSecret`          | When using the Google provider, specify the existing secret which contains credentials.json (optional)                                                                                                          | `""`                                                    |
| `google.serviceAccountSecretKey`       | When using the Google provider with an existing secret, specify the key name (optional)                                                                                                                         | `"credentials.json"`                                    |
| `google.serviceAccountKey`             | When using the Google provider, specify the service account key JSON file. (required when `google.serviceAccountSecret` is not provided. In this case a new secret will be created holding this service account | `""`                                                    |
| `hetzner.secretName`                   | When using the Hetzner provider, specify the existing secret which contains your token. Disables the usage of `hetzner.token` (optional)                                                                        | `""`                                                    |
| `hetzner.secretKey`                    | When using the Hetzner provider with an existing secret, specify the key name (optional)                                                                                                                        | `"hetzner_token"`                                       |
| `hetzner.token`                        | When using the Hetzner provider, specify your token here. (required when `hetzner.secretName` is not provided. In this case a new secret will be created holding the token.)                                    | `""`                                                    |
| `ovh.consumerKey`                      | When using the OVH provider, specify the existing consumer key. (required when provider=ovh and `ovh.secretName` is not provided.)                                                                              | `""`                                                    |
| `ovh.applicationKey`                   | When using the OVH provider with an existing application, specify the application key. (required when provider=ovh and `ovh.secretName` is not provided.)                                                       | `""`                                                    |
| `ovh.applicationSecret`                | When using the OVH provider with an existing application, specify the application secret. (required when provider=ovh and `ovh.secretName` is not provided.)                                                    | `""`                                                    |
| `ovh.secretName`                       | When using the OVH provider, it's the name of the secret containing `ovh_consumer_key`, `ovh_application_key` and `ovh_application_secret`. Disables usage of other `ovh.*`-keys. (optional)                    | `""`                                                    |
| `scaleway.scwAccessKey`                | When using the Scaleway provider, specify an existing access key. (required when provider=scaleway)                                                                                                             | `""`                                                    |
| `scaleway.scwSecretKey`                | When using the Scaleway provider, specify an existing secret key. (required when provider=scaleway)                                                                                                             | `""`                                                    |
| `scaleway.scwDefaultOrganizationId`    | When using the Scaleway provider, specify the existing organization id. (required when provider=scaleway)                                                                                                       | `""`                                                    |
| `infoblox.gridHost`                    | When using the Infoblox provider, specify the Infoblox Grid host (required when provider=infoblox)                                                                                                              | `""`                                                    |
| `infoblox.wapiUsername`                | When using the Infoblox provider, specify the Infoblox WAPI username                                                                                                                                            | `"admin"`                                               |
| `infoblox.wapiPassword`                | When using the Infoblox provider, specify the Infoblox WAPI password (required when provider=infoblox)                                                                                                          | `""`                                                    |
| `infoblox.domainFilter`                | When using the Infoblox provider, specify the domain (optional)                                                                                                                                                 | `""`                                                    |
| `infoblox.secretName`                  | When using the Infoblox provider, specify a name of existing Secret with wapiUsername and wapiPassword (optional)                                                                                               | `""`                                                    |
| `infoblox.noSslVerify`                 | When using the Infoblox provider, disable SSL verification (optional)                                                                                                                                           | `false`                                                 |
| `infoblox.wapiPort`                    | When using the Infoblox provider, specify the Infoblox WAPI port (optional)                                                                                                                                     | `""`                                                    |
| `infoblox.wapiVersion`                 | When using the Infoblox provider, specify the Infoblox WAPI version (optional)                                                                                                                                  | `""`                                                    |
| `infoblox.wapiConnectionPoolSize`      | When using the Infoblox provider, specify the Infoblox WAPI request connection pool size (optional)                                                                                                             | `""`                                                    |
| `infoblox.wapiHttpTimeout`             | When using the Infoblox provider, specify the Infoblox WAPI request timeout in seconds (optional)                                                                                                               | `""`                                                    |
| `linode.apiToken`                      | When using the Linode provider, `LINODE_TOKEN` to set (optional)                                                                                                                                                | `""`                                                    |
| `ns1.minTTL`                           | When using the ns1 provider, specify minimal TTL, as an integer, for records                                                                                                                                    | `10`                                                    |
| `rfc2136.host`                         | When using the rfc2136 provider, specify the RFC2136 host (required when provider=rfc2136)                                                                                                                      | `""`                                                    |
| `rfc2136.port`                         | When using the rfc2136 provider, specify the RFC2136 port (optional)                                                                                                                                            | `53`                                                    |
| `rfc2136.zone`                         | When using the rfc2136 provider, specify the zone (required when provider=rfc2136)                                                                                                                              | `""`                                                    |
| `rfc2136.secretName`                   | When using the rfc2136 provider, specify the existing secret which contains your tsig secret. Disables the usage of `rfc2136.tsigSecret` (optional)                                                             | `""`                                                    |
| `rfc2136.tsigSecret`                   | When using the rfc2136 provider, specify the tsig secret to enable security. (do not specify if `rfc2136.secretName` is provided.) (optional)                                                                   | `""`                                                    |
| `rfc2136.tsigKeyname`                  | When using the rfc2136 provider, specify the tsig keyname to enable security (optional)                                                                                                                         | `"externaldns-key"`                                     |
| `rfc2136.tsigSecretAlg`                | When using the rfc2136 provider, specify the tsig secret to enable security (optional)                                                                                                                          | `"hmac-sha256"`                                         |
| `rfc2136.tsigAxfr`                     | When using the rfc2136 provider, enable AFXR to enable security (optional)                                                                                                                                      | `true`                                                  |
| `rfc2136.minTTL`                       | When using the rfc2136 provider, specify minimal TTL (in duration format) for records                                                                                                                           | `"0s"`                                                  |
| `pdns.apiUrl`                          | When using the PowerDNS provider, specify the API URL of the server.                                                                                                                                            | `""`                                                    |
| `pdns.apiPort`                         | When using the PowerDNS provider, specify the API port of the server.                                                                                                                                           | `8081`                                                  |
| `pdns.apiKey`                          | When using the PowerDNS provider, specify the API key of the server.                                                                                                                                            | `""`                                                    |
| `pdns.secretName`                      | When using the PowerDNS provider, specify as secret name containing the API Key                                                                                                                                 | `""`                                                    |
| `transip.account`                      | When using the TransIP provider, specify the account name.                                                                                                                                                      | `""`                                                    |
| `transip.apiKey`                       | When using the TransIP provider, specify the API key to use.                                                                                                                                                    | `""`                                                    |
| `vinyldns.host`                        | When using the VinylDNS provider, specify the VinylDNS API host.                                                                                                                                                | `""`                                                    |
| `vinyldns.accessKey`                   | When using the VinylDNS provider, specify the Access Key to use.                                                                                                                                                | `""`                                                    |
| `vinyldns.secretKey`                   | When using the VinylDNS provider, specify the Secret key to use.                                                                                                                                                | `""`                                                    |
| `annotationFilter`                     | Filter sources managed by external-dns via annotation using label selector (optional)                                                                                                                           | `""`                                                    |
| `domainFilters`                        | Limit possible target zones by domain suffixes (optional)                                                                                                                                                       | `[]`                                                    |
| `excludeDomains`                       | Exclude subdomains (optional)                                                                                                                                                                                   | `[]`                                                    |
| `zoneNameFilters`                      | Filter target zones by zone domain (optional)                                                                                                                                                                   | `[]`                                                    |
| `zoneIdFilters`                        | Limit possible target zones by zone id (optional)                                                                                                                                                               | `[]`                                                    |
| `crd.create`                           | Install and use the integrated DNSEndpoint CRD                                                                                                                                                                  | `false`                                                 |
| `crd.apiversion`                       | Sets the API version for the CRD to watch                                                                                                                                                                       | `""`                                                    |
| `crd.kind`                             | Sets the kind for the CRD to watch                                                                                                                                                                              | `""`                                                    |
| `dryRun`                               | When enabled, prints DNS record changes rather than actually performing them (optional)                                                                                                                         | `false`                                                 |
| `logLevel`                             | Verbosity of the logs (options: panic, debug, info, warning, error, fatal, trace)                                                                                                                               | `info`                                                  |
| `logFormat`                            | Which format to output logs in (options: text, json)                                                                                                                                                            | `text`                                                  |
| `interval`                             | Interval update period to use                                                                                                                                                                                   | `1m`                                                    |
| `triggerLoopOnEvent`                   | When enabled, triggers run loop on create/update/delete events in addition to regular interval (optional)                                                                                                       | `false`                                                 |
| `policy`                               | Modify how DNS records are synchronized between sources and providers (options: sync, upsert-only )                                                                                                             | `upsert-only`                                           |
| `registry`                             | Registry method to use (options: txt, aws-sd, noop)                                                                                                                                                             | `txt`                                                   |
| `txtOwnerId`                           | A name that identifies this instance of ExternalDNS. Currently used by registry types: txt & aws-sd (optional)                                                                                                  | `"default"`                                             |
| `forceTxtOwnerId`                      | (backward compatibility) When using the non-TXT registry, it will pass the value defined by `txtOwnerId` down to the application (optional)                                                                     | `false`                                                 |
| `txtPrefix`                            | When using the TXT registry, a prefix for ownership records that avoids collision with CNAME entries (optional)                                                                                                 | `""`                                                    |
| `txtSuffix`                            | When using the TXT registry, a suffix for ownership records that avoids collision with CNAME entries (optional)                                                                                                 | `""`                                                    |
| `extraArgs`                            | Extra arguments to be passed to external-dns                                                                                                                                                                    | `{}`                                                    |
| `extraEnv`                             | Extra environment variables to be passed to external-dns                                                                                                                                                        | `[]`                                                    |
| `replicas`                             | Desired number of ExternalDNS replicas                                                                                                                                                                          | `1`                                                     |
| `podAffinityPreset`                    | Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                             | `""`                                                    |
| `podAntiAffinityPreset`                | Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                        | `soft`                                                  |
| `nodeAffinityPreset.type`              | Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                       | `""`                                                    |
| `nodeAffinityPreset.key`               | Node label key to match Ignored if `affinity` is set.                                                                                                                                                           | `""`                                                    |
| `nodeAffinityPreset.values`            | Node label values to match. Ignored if `affinity` is set.                                                                                                                                                       | `[]`                                                    |
| `affinity`                             | Affinity for pod assignment                                                                                                                                                                                     | `{}` (evaluated as a template)                          |
| `nodeSelector`                         | Node labels for pod assignment                                                                                                                                                                                  | `{}` (evaluated as a template)                          |
| `tolerations`                          | Tolerations for pod assignment                                                                                                                                                                                  | `[]` (evaluated as a template)                          |
| `podAnnotations`                       | Additional annotations to apply to the pod.                                                                                                                                                                     | `{}`                                                    |
| `podLabels`                            | Additional labels to be added to pods                                                                                                                                                                           | `{}`                                                    |
| `podSecurityContext.fsGroup`           | Group ID for the container                                                                                                                                                                                      | `1001`                                                  |
| `podSecurityContext.runAsUser`         | User ID for the container                                                                                                                                                                                       | `1001`                                                  |
| `priorityClassName`                    | priorityClassName                                                                                                                                                                                               | `""`                                                    |
| `secretAnnotations`                    | Additional annotations to apply to the secret                                                                                                                                                                   | `{}`                                                    |
| `securityContext`                      | Security context for the container                                                                                                                                                                              | `{}`                                                    |
| `podDisruptionBudget`                  | PodDisruptionBudget for the pod                                                                                                                                                                                 | `{}`                                                    |
| `service.enabled`                      | Whether to create Service resource or not                                                                                                                                                                       | `true`                                                  |
| `service.type`                         | Kubernetes Service type                                                                                                                                                                                         | `ClusterIP`                                             |
| `service.port`                         | ExternalDNS client port                                                                                                                                                                                         | `7979`                                                  |
| `service.nodePort`                     | Port to bind to for NodePort service type (client port)                                                                                                                                                         | `nil`                                                   |
| `service.clusterIP`                    | IP address to assign to service                                                                                                                                                                                 | `""`                                                    |
| `service.externalIPs`                  | Service external IP addresses                                                                                                                                                                                   | `[]`                                                    |
| `service.loadBalancerIP`               | IP address to assign to load balancer (if supported)                                                                                                                                                            | `""`                                                    |
| `service.loadBalancerSourceRanges`     | List of IP CIDRs allowed access to load balancer (if supported)                                                                                                                                                 | `[]`                                                    |
| `service.annotations`                  | Annotations to add to service                                                                                                                                                                                   | `{}`                                                    |
| `service.labels`                       | Labels to add to service                                                                                                                                                                                        | `{}`                                                    |
| `serviceAccount.create`                | Determine whether a Service Account should be created or it should reuse a exiting one.                                                                                                                         | `true`                                                  |
| `serviceAccount.name`                  | ServiceAccount to use. A name is generated using the external-dns.fullname template if it is not set                                                                                                            | `nil`                                                   |
| `serviceAccount.annotations`           | Additional Service Account annotations                                                                                                                                                                          | `{}`                                                    |
| `serviceAccount.automountServiceAccountToken` | Automount API credentials for a service account.                                                                                                                                         | `true`                                                  |
| `rbac.create`                          | Whether to create & use RBAC resources or not                                                                                                                                                                   | `true`                                                  |
| `rbac.apiVersion`                      | Version of the RBAC API                                                                                                                                                                                         | `v1`                                                    |
| `rbac.pspEnabled`                      | PodSecurityPolicy                                                                                                                                                                                               | `false`                                                 |
| `rbac.clusterRole`                     | Whether to create Cluster Role. When set to false creates a Role in `namespace`                                                                                                                                 | `true`                                                  |
| `resources`                            | CPU/Memory resource requests/limits.                                                                                                                                                                            | `{}`                                                    |
| `livenessProbe`                        | Deployment Liveness Probe                                                                                                                                                                                       | See `values.yaml`                                       |
| `readinessProbe`                       | Deployment Readiness Probe                                                                                                                                                                                      | See `values.yaml`                                       |
| `extraVolumes`                         | A list of volumes to be added to the pod                                                                                                                                                                        | `[]`                                                    |
| `extraVolumeMounts`                    | A list of volume mounts to be added to the pod                                                                                                                                                                  | `[]`                                                    |
| `metrics.enabled`                      | Enable prometheus to access external-dns metrics endpoint                                                                                                                                                       | `false`                                                 |
| `metrics.podAnnotations`               | Annotations for enabling prometheus to access the metrics endpoint                                                                                                                                              |                                                         |
| `metrics.serviceMonitor.enabled`       | Create ServiceMonitor object                                                                                                                                                                                    | `false`                                                 |
| `metrics.serviceMonitor.selector`      | Additional labels for ServiceMonitor object                                                                                                                                                                     | `{}`                                                    |
| `metrics.serviceMonitor.interval`      | Interval at which metrics should be scraped                                                                                                                                                                     | `30s`                                                   |
| `metrics.serviceMonitor.scrapeTimeout` | Timeout after which the scrape is ended                                                                                                                                                                         | `30s`                                                   |
